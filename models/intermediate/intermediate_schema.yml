version: 2

models:
  - name: int_customer_orders
    description: >
      Intermediate model that joins customers, orders, and order items.
      Grain is one row per order per product. Used as a base for order
      and revenue marts.

    columns:
      - name: order_id
        description: Order identifier.
        tests:
          - not_null

      - name: customer_id
        description: Customer who placed the order.
        tests:
          - not_null

      - name: product_id
        description: Product included in the order.
        tests:
          - not_null

      - name: order_date
        description: Date the order was placed.
        tests:
          - not_null

      - name: quantity
        description: Number of units ordered.
        tests:
          - not_null

      - name: line_total
        description: Total amount for this order line.
        tests:
          - not_null

      - name: total_amount
        description: Total order amount (duplicated per order item).
        tests:
          - not_null


  - name: int_customer_loyalty
    description: >
      Intermediate model combining customer details with loyalty
      point transactions. Grain is one row per loyalty transaction.

    columns:
      - name: loyalty_id
        description: Unique identifier for a loyalty transaction.
        tests:
          - not_null

      - name: customer_id
        description: Customer associated with the loyalty transaction.
        tests:
          - not_null

      - name: transaction_date
        description: Date the loyalty points were earned.
        tests:
          - not_null

      - name: points_earned
        description: Number of loyalty points earned.
        tests:
          - not_null

      - name: points_source
        description: Source of the loyalty points (order, promo, etc).
        tests:
          - not_null
